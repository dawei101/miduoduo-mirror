define(function(require,exports){function initGetReqCallbakcAspect(cb){initGetReqNum--,cb()}function handleError(res){if(422==res.status){var tipsArr=JSON.parse(res.response),tipsStr="";if(tipsArr.forEach(function(e){tipsStr+=e.message+"\n"}),window.WebViewJavascriptBridge){var opts={action:"b_toast_alert",data:{message:tipsStr,disappear_delay:2e3}};window.WebViewJavascriptBridge.send(opts,null)}else alert(tipsStr)}401==res.status&&window.WebViewJavascriptBridge&&WebViewJavascriptBridge.send({action:"b_require_auth",data:{}},function(data){location.reload()}),console.log(arguments),alert("访问异常："+res.status+" "+res.statusText)}function parseArguments(url,data,success,dataType){return $.isFunction(data)&&(dataType=success,success=data,data=void 0),$.isFunction(success)||(dataType=success,success=void 0),{url:url,data:data,success:success,dataType:dataType}}require("zepto"),$.get=function(){var options=parseArguments.apply(null,arguments);return options.error=handleError,$.ajax(options)},$.post=function(){var options=parseArguments.apply(null,arguments);return options.type="POST",options.error=handleError,$.ajax(options)},$.put=function(){var options=parseArguments.apply(null,arguments);return options.type="PUT",options.error=handleError,$.ajax(options)},$["delete"]=function(){var options=parseArguments.apply(null,arguments);return options.type="DELETE",options.error=handleError,$.ajax(options)};var initGetReqNum=0;$.pageInitGet=function(){initGetReqNum+=1;var options=parseArguments.apply(null,arguments),callback=options.success;return options.success=function(){initGetReqCallbakcAspect(callback)},options.error=handleError,$.ajax(options)}});