define(function(require,exports){function handle_action(data,responseCallback){var rst={action:"q_before_quit",result:{value:!0}};""!=location.hash?(location.hash="",rst.result.value=!1,responseCallback(rst)):util.cf({title:"注意",message:"确定放弃编辑吗？"},function(data){data=JSON.parse(data),0==data.result.value&&(rst.result.value=!1),responseCallback(rst)})}require("zepto-ext");var api=require("../widget/api"),util=require("../widget/util"),calendar=require("../widget/calendar");document.addEventListener("WebViewJavascriptBridgeReady",function(){WebViewJavascriptBridge.defaultHandler(handle_action)},!1),location.hash="";var tpl=require("../widget/tpl-engine");$("body").append(tpl.parse("main1-tpl",{})),$("body").append(tpl.parse("main2-tpl",{})),calendar.initCalendar(),$(".next-btn").on("click",function(){location.hash="#main2"}),$(window).on("hashchange",function(){""==location.hash?($(".main1").show(),$(".main2").hide()):($(".main1").hide(),$(".main2").show())}),$(".js-birthday").on("click",function(){$(".calendar-widget, .shade-widget").show(300)}),$(".sex").find("div").on("click",function(){$(this).addClass("sex-act").siblings().removeClass("sex-act")}),$(".sub2-con-val").on("click",function(){$(this).toggleClass("sub2-con-val-act")});var timeName=["morning","afternoon","evening"];$(".dateCol > .time").on("click",function(){var $this=$(this),classStr="time-act",dayIndex=$this.parent().index()+1,timeIndex=$this.index()-1,data={};$this.hasClass(classStr)?($this.removeClass(classStr),data[timeName[timeIndex]]=0):($this.addClass(classStr),data[timeName[timeIndex]]=1),$.put(api.gen("freetime/"+dayIndex),data,function(data){console.log(data)})}),$(".freetime-all").on("click",function(){$(".dateCol > .time").addClass("time-act"),$.post(api.gen("freetime/free-all"),{},function(data){console.log(data)})}),$(".js-sel-service-type").on("click",function(e){$(".sel-job-type").animate({"-webkit-transform":"translate3d(0,0,0)"},500)}),$(".js-set-address").on("click",function(){var $this=$(this);util.setAddress(function(data){alert("app返回的地址信息："+JSON.stringify(data)),data=JSON.parse(data),$this.find("input").val(data.address),$.post(api.gen("address"),data,function(data){console.log(data)})})}),$(".submit-btn").on("click",function(){var data={};$(".js-col").each(function(){data[$(this).attr("name")]=$(this).val()});var $sc=$(".js-special-col");data[$sc.attr("name")]=$sc.find(".sex-act").data("val"),data.phonenum=miduoduo.user.phone,console.log("简历",data),$.post(api.gen("resume"),data,function(data){console.log(data)})}),require("./resume-job-type")});